(this["webpackJsonpmusicians-coinbase-tracker"]=this["webpackJsonpmusicians-coinbase-tracker"]||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(59),s=n.n(a),i=(n(67),n(12)),u=n.n(i),o=n(37),b=n(13),f=n(62),d=n(1);var l=function(e){var t=e.price,n=e.data;return"0.00"===t?Object(d.jsx)("h2",{children:"please select a currency pair"}):Object(d.jsxs)("div",{className:"dashboard",children:[Object(d.jsx)("h2",{children:"\u20ac".concat(t)}),Object(d.jsx)("div",{className:"chart-container",children:Object(d.jsx)(f.a,{data:n,options:{tooltips:{intersect:!1,mode:"index"},responsive:!0,maintainAspectRatio:!1}})})]})},p=function(e){var t={labels:[],datasets:[{label:"Price",data:[],backgroundColor:"rgb(66, 212, 126, 0.8)",borderColor:"rgba(66, 212, 126, 0.2)",fill:!1}]},n=e.map((function(e){var t=e[0],n=new Date(1e3*t),r=n.getDate(),c=n.getMonth()+1,a=n.getFullYear();return"".concat(c,"-").concat(r,"-").concat(a)})),r=e.map((function(e){return e[4]}));return r.reverse(),n.reverse(),t.labels=n,t.datasets[0].data=r,t};n(176);function j(){var e=Object(r.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(b.a)(a,2),i=s[0],f=s[1],j=Object(r.useState)("0.00"),h=Object(b.a)(j,2),v=h[0],O=h[1],m=Object(r.useState)({}),g=Object(b.a)(m,2),y=g[0],x=g[1],k=Object(r.useRef)(null),w=Object(r.useRef)(!1),S="https://api.pro.coinbase.com";Object(r.useEffect)((function(){k.current=new WebSocket("wss://ws-feed.pro.coinbase.com");var e=[];(function(){var t=Object(o.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(S+"/products").then((function(e){return e.json()})).then((function(t){return e=t}));case 2:n=(n=e.filter((function(e){if("EUR"===e.quote_currency)return e}))).sort((function(e,t){return e.base_currency<t.base_currency?-1:e.base_currency>t.base_currency?1:0})),c(n),w.current=!0;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){if(w.current){var e={type:"subscribe",product_ids:[i],channels:["ticker"]},t=JSON.stringify(e);k.current.send(t);var n="".concat(S,"/products/").concat(i,"/candles?granularity=86400");(function(){var e=Object(o.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,fetch(n).then((function(e){return e.json()})).then((function(e){return t=e}));case 3:r=p(t),x(r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),k.current.onmessage=function(e){var t=JSON.parse(e.data);"ticker"===t.type&&t.product_id===i&&O(t.price)}}}),[i]);return Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("select",{name:"currency",value:i,onChange:function(e){var t={type:"unsubscribe",product_ids:[i],channels:["ticker"]},n=JSON.stringify(t);k.current.send(n),f(e.target.value)},children:n.map((function(e,t){return Object(d.jsx)("option",{value:e.id,children:e.display_name},t)}))}),Object(d.jsx)(l,{price:v,data:y})]})}var h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,178)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(j,{})}),document.getElementById("root")),h()},67:function(e,t,n){}},[[177,1,2]]]);
//# sourceMappingURL=main.14914dff.chunk.js.map